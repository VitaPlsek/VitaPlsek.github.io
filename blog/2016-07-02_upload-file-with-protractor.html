<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="cs" lang="cs" xmlns:og="http://opengraphprotocol.org/schema/"><head><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/styles/rainbow.min.css"/><link href="/css/style.css" rel="stylesheet"/><title>Upload souboru pomocí protractoru - Víťa Plšek</title><meta name="description" content="Když potřebujete testovat v end 2 end testech upload souboru, jak to uděláte? Pokud nevíte jak na to, vězte, že to lze řešit šalamounským přístupem."/><meta property="og:site_name" content="VitaPlsek.cz"/><meta property="og:type" content="article"/><meta property="og:description" content="Když potřebujete testovat v end 2 end testech upload souboru, jak to uděláte? Pokud nevíte jak na to, vězte, že to lze řešit šalamounským přístupem."/><meta property="article:author" content="http://www.vitaplsek.cz"/><meta property="og:image" content="http://www.vitaplsek.cz/images/vitaplsek.jpg"/><meta property="og:url" content="http://www.vitaplsek.cz/blog/2016-07-02_upload-file-with-protractor.html"/><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/highlight.min.js"></script><script>hljs.initHighlightingOnLoad()</script></head><body><div class="article-panel"><div class="panel-body"><div class="article-header"><h2>Víťa Plšek - Zápisky Java / Script vývojáře</h2><a href="/" class="btn btn-default">&larr; Zpět na úvodní stranu</a></div></div></div><div class="article-panel"><div class="panel-body"><h1>Upload souboru pomocí protractoru</h1><p>2. července 2016</p><p>Když potřebujete testovat v end 2 end testech upload souboru, jak to uděláte?
</p><p>Dialog otevření okna je mimo dosah selenium webdriveru, pro přímou manipulaci s ním by bylo potřeba použít nějakou externí utilitu.
Tímto směrem ale nepůjdeme. Pokud nevíte jak to udělat jinak, vězte, že to lze řešit šalamounským přístupem.
</p><p>Princip je jednoduchý, k elementu typu file je možné se chovat jako k běžnému inputu, a tedy poslat na něj text pomocí metody <strong>sendKeys</strong>.
</p><pre><code class="javascript">var fileElement = element(by.id('file'));
fileElement.sendKeys(absolutePathToFile);
</code></pre><p>Zbývá nezapomenout, že cesta musí být absolutní a je hotovo
</p><h3>Ukázková aplikace</h3><p>Funkční ukázku si můžete prohlédnout zde:<a href="https://github.com/VitaPlsek/protractor-upload-test" target="_blank"> https://github.com/VitaPlsek/protractor-upload-test</a></p><p>Jde o malou aplikaci v JavaScriptu, která umožní vybrat soubor a zobrazí o něm informace.
</p><p>Testovací scénář<a href="https://github.com/VitaPlsek/protractor-upload-test/blob/master/test/upload.scenario.js" target="_blank"> upload.scenario.js</a>, využívá page object<a href="https://github.com/VitaPlsek/protractor-upload-test/blob/master/test/po/upload.js" target="_blank"> upload.js.</a> V něm se můžete přesvědčit, že opravdu do pole jen posílá text.</p><hr/><div class="btn-toolbar"><span><a href="/blog/2016-07-14_cesky-slovnik-pro-produkty-jetbrains.html" class="btn btn-default">&larr; Český slovník pro produkty JetBrains</a></span>&nbsp<span class="pull-right"><a href="/blog/2016-06-08_junit-rule-in-selenium.html" class="btn btn-default">Využití JUnit Rule v Selenium testu &rarr;</a></span></div><hr/><h4>Pokud Vás článek zaujal, dejte o něm vědět ostatním</h4><ul class="share-buttons"><li><a href="https://www.facebook.com/sharer/sharer.php?u=http://www.vitaplsek.cz/blog/2016-07-02_upload-file-with-protractor.html &amp;t=Upload%20souboru%20pomoc%C3%AD%20protractoru" title="Sdílet na Facebooku" target="_blank"><img alt="Sdílet na Facebooku" src="/images/social_flat_rounded_rects_svg/Facebook.svg"/></a></li><li><a href="https://twitter.com/intent/tweet?source=http%3A%2F%2Fwww.vitaplsek.cz%2Fblog%2F2016-07-02_upload-file-with-protractor.html&amp;text=Upload%20souboru%20pomoc%C3%AD%20protractoru%20%3A%20http%3A%2F%2Fwww.vitaplsek.cz%2Fblog%2F2016-07-02_upload-file-with-protractor.html%20%40VitaPlsek" target="_blank" title="Tweet"><img alt="Sdílet na Twitteru" src="/images/social_flat_rounded_rects_svg/Twitter.svg"/></a></li><li><a href="https://plus.google.com/share?url=http%3A%2F%2Fwww.vitaplsek.cz%2Fblog%2F2016-07-02_upload-file-with-protractor.html" target="_blank" title="Sdílet na Google+"><img alt="Sdílet na Google+" src="/images/social_flat_rounded_rects_svg/Google+.svg"/></a></li><li><a href="http://www.linkedin.com/shareArticle?mini=true&quot; + &amp;url=http%3A%2F%2Fwww.vitaplsek.cz%2Fblog%2F2016-07-02_upload-file-with-protractor.html&amp;title=Upload%20souboru%20pomoc%C3%AD%20protractoru&amp;summary=Kdy%C5%BE%20pot%C5%99ebujete%20testovat%20v%20end%202%20end%20testech%20upload%20souboru%2C%20jak%20to%20ud%C4%9Bl%C3%A1te%3F%20Pokud%20nev%C3%ADte%20jak%20na%20to%2C%20v%C4%9Bzte%2C%20%C5%BEe%20to%20lze%20%C5%99e%C5%A1it%20%C5%A1alamounsk%C3%BDm%20p%C5%99%C3%ADstupem.&amp;sourcehttp%3A%2F%2Fwww.vitaplsek.cz%2Fblog%2F2016-07-02_upload-file-with-protractor.html" target="_blank" title="Sdílet na LinkedIn"><img alt="Sdílet na LinkedIn" src="/images/social_flat_rounded_rects_svg/LinkedIn.svg"/></a></li><li><a href="mailto:?subject=Upload%20souboru%20pomoc%C3%AD%20protractoru&amp;body=Kdy%C5%BE%20pot%C5%99ebujete%20testovat%20v%20end%202%20end%20testech%20upload%20souboru%2C%20jak%20to%20ud%C4%9Bl%C3%A1te%3F%20Pokud%20nev%C3%ADte%20jak%20na%20to%2C%20v%C4%9Bzte%2C%20%C5%BEe%20to%20lze%20%C5%99e%C5%A1it%20%C5%A1alamounsk%C3%BDm%20p%C5%99%C3%ADstupem.%0D%0A%0D%0Ahttp%3A%2F%2Fwww.vitaplsek.cz%2Fblog%2F2016-07-02_upload-file-with-protractor.html" target="_blank" title="Poslat mailem"><img alt="Poslat mailem" src="/images/social_flat_rounded_rects_svg/Email.svg"/></a></li></ul><hr/><div id="disqus_thread"></div><script>/**
 *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
 *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/

var disqus_config = function() {
  this.page.url = article.url;  // Replace PAGE_URL with your page's canonical URL variable
  this.page.identifier = article.template; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
  var d = document, s = d.createElement('script');
  s.src = '//vitaplsek.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
})();
</script><hr/><p class="text-center">&copy; Víťa Plšek</p></div></div></body></html>